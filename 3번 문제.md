# 3. 웹 브라우저에 `네이버` 를 검색하고 화면에 네이버 화면이 출력이 될 때까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.

저희가 브라우저의 주소창에 www.naver.com 을 입력하게 되면 브라우저는 주소창입력에 대한 요청을 `대기열`에 넣고 요청을 처리합니다. 이때, 앞서 캐싱된 값들이 있다면 `브라우저 캐시`나 `공유 프록시 캐시`를 통해 네이버 페이지에 대한 문서들을 통해 네이버 화면을 바로 출력할 수 있습니다.

최초로 브라우저 주소창에 입력했다면 브라우저에 입력한 도메인 이름을 `DNS(Domain Name Server)` 에게 질의 하여 해당 도메인의 IP 주소를 확인하게 됩니다. 이때도 만약 컴퓨터의 메모리에 있는 호스트 파일과 같은 곳에 캐시가 있다면 DNS 서버로 요청하지 않고 바로 IP 를 확인할 수 있습니다.

DNS 서버에서는 Root Domain (".") -> Top-Level Domain ("com") -> Second-Level Domain ("naver.com") -> Third-Level Domain ("www.naver.com") 과정을 거쳐서 완벽한 주소를 찾고 IP 주소를 매핑하여 응답합니다.

이제 DNS 서버에서 전달받은 IP 주소 찾아가기 위해 `라우팅`이 필요합니다. IP 주소 기반의 목적지 까지 찾아가기 위해서 `라우팅 테이블`과 `서브네트워크`를 거쳐야 합니다. 

`라우팅 테이블` 은 송신지에서 수신지 까지 도달하기 위해 사용되며 라우터에 들어가 있는 목적지 정보와 목적지로 가기 위한 방법이 들어있는 리스트들 입니다. 라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야할 라우터의 정보를 가지고 있습니다.

라우팅 테이블은 `라우터` 마다 존재하며, 라우터는 통신 장치를 의미합니다.

`게이트 웨이` 는 서로 다른 통신망과 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터 입니다. 즉 서브네트워크간의 통신을 가능하게 합니다.

이와 같이 IP 주소로 통신하는 과정을 `hop by hop 통신`이라고 하는데, 통신망에서 패킷이 여러 라우터를 건너가는 모습을 뜻합니다. 각각의 라우터에 있는 라우팅 테이블의 IP 를 기반으로 패킷을 전달해 나갑니다. (라우팅 테이블의 IP 를 통해 최종 목적지까지 도달하는 통신이 홉바이홉 통신입니다.)

최종 목적지의 라우터에 도달하게 되면 IP 주소를 `ARP(Address Resolution Protocol)` 을 통해 `MAC 주소`를 찾아 MAC 주소를 기반으로 다시 통신하게 됩니다.

`ARP` 는  IP 주소로 부터 MAC 주소를 구하는 다리역할을 하는 프로토콜 입니다. 즉, 가상 주소인 IP 를 실제 주소인 MAC 주소로 변환해주는 역할을 수행합니다.

목적지의 라우터에서 `ARP Request 브로드 캐스트`를 요청하게 되면 네이버 IP 주소에 해당하는 MAC 주소를 찾고, 해당 장치가 `ARP Reqply 유니캐스트` 응답을 통해 MAC 주소를 반환하여 실제 네이버의 주소를 찾게 됩니다. 



이렇게 네이버의 실제 주소를 찾게 되면, 브라우저는 `TCP 연결` 수립을 위해 `3 way handshaking` 을 진행하고 `SSL 연결` 등 필요한 연결들을 설정합니다. 

연결이 수립되면 `HTTP 프로토콜` 을 통해 네이버 서버에 HTTP 요청을 보내고 HTTP 응답을 받게 됩니다.

HTTP 응답을 받으면 브라우저는 서버로 부터 응답을 수신하게 되는데, 이때 받은 컨텐츠를 이용하여 `브라우저 렌더링`이 일어나게 되면서 네이버 화면이 출력되게 됩니다.





